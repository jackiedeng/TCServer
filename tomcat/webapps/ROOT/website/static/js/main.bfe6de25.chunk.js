(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){e.exports=a(412)},197:function(e,t,a){},254:function(e,t,a){},265:function(e,t,a){},267:function(e,t,a){},380:function(e,t,a){},403:function(e,t,a){},412:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(9),s=a.n(o),r=(a(197),a(23)),l=a(21),c=a(26),h=a(24),u=a(27),g=a(422),d=a(428),m=a(429),f=a(39),y=a.n(f);a(200);function v(e){e?y.a.error("error",2e3):y.a.error("\u7f51\u7edc\u6216\u7cfb\u7edf\u5f02\u5e38",2e3)}function p(e,t){var a="";for(var n in t)a+=""==a?"?"+n+"="+t[n]:"&"+n+"="+t[n];return e+a}function k(e,t,a){var n=""+e;n=p(n,t),console.log("url:::",n),fetch(n,{method:"GET",mode:"cors",headers:{Accept:"application/json,text/plain,*/*","content-type":"text/html;charset=utf-8"}}).then(function(e){return e.text()}).then(function(e){console.log(e);var t=e;try{t=JSON.parse(t)}catch(n){t=e}a(t)}).catch(function(e){console.log("fetch fail"),v(e)})}function w(e){return""+e}function b(e){k("/request/pool/queryAll.do",{a:1,b:2},e)}function C(e,t,a,n){!function(e,t,a){var n=""+e,i=new FormData;for(var o in t)i.append(o,t[o]);console.log("url:::",n),fetch(n,{method:"POST",body:i,mode:"no-cors"}).then(function(e){return e.text()}).then(function(e){console.log(e);var t=e;try{t=JSON.parse(t)}catch(n){t=e}a(t)}).catch(function(e){console.log("fetch fail"),v(e)})}("/imageUpload.do",{data:e,fileName:t,tags:JSON.stringify(a)},n)}function E(e){k("/request/common/queryAll.do",{type:"markTag"},e)}var S="/",N="/imgPool",I="/sketch",T="/datatag",x="/train";function O(e,t){var a=p(e,t);console.log("jump->",a),window.open(a,"_self")}var F=a(182),K=a.n(F),D=a(181),j=a.n(D),q=a(424),B=a(425),L=a(413),W=a(426),z=a(427),M=(a(254),L.a.SubMenu,W.a.Header),P=W.a.Content,A=W.a.Footer,H=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"defaultSelect",value:function(){if(this.props.markKey)return[this.props.markKey]}},{key:"render",value:function(){return i.a.createElement(W.a,{className:"layout"},i.a.createElement(M,null,i.a.createElement("div",{className:"logo"},"FIA\u7ba1\u7406\u7cfb\u7edf"),i.a.createElement(L.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:this.defaultSelect(),style:{lineHeight:"64px"},onClick:function(e,t,a){window.open("/"+e.key,"_self")}},i.a.createElement(L.a.Item,{key:"dataset"},"\u8bad\u7ec3\u6570\u636e\u96c6"),i.a.createElement(L.a.Item,{key:"datatag"},"\u6807\u6ce8\u7ba1\u7406"),i.a.createElement(L.a.Item,{key:"train"},"\u6a21\u578b\u4efb\u52a1"))),i.a.createElement(P,{style:{padding:"0 50px"}},i.a.createElement(z.a,{style:{margin:"16px 0"}},i.a.createElement(z.a.Item,null,this.props.subTitle)),i.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},i.a.createElement("div",{className:"main-content-layout"},this.props.children))),i.a.createElement(A,{style:{textAlign:"center"}},"S.T.A.R.S \xa92018"))}}]),t}(n.Component);a(265),a(267);function R(e,t){return i.a.createElement("div",{className:"g-text-button",onClick:function(){t()}},e)}var U=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={visible:!1,addNewTagSwitch:!1,tagList:[],newTagName:"",newTagKey:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.queryForAllTag()}},{key:"queryForAllTag",value:function(){console.log("requet:");var e=this;b(function(t){console.log(">>",t.data,t),e.setState({tagList:t.data})})}},{key:"renderDelteTag",value:function(e){var t=this;return i.a.createElement(j.a,{title:"\u786e\u8ba4\u5220\u9664\u6570\u636e\u96c6"+e.poolName+"?",onConfirm:function(){k("/request/pool/delete.do",{poolKey:e.poolKey},function(e){y.a.success("\u5220\u9664\u6210\u529f"),t.queryForAllTag()})},onCancel:function(){},okText:"Yes",cancelText:"No"},i.a.createElement("a",{href:"#"},"\u5220\u9664"))}},{key:"columns",value:function(){var e=this;return[{title:"\u6570\u636e\u96c6\u540d\u79f0",render:function(e){return i.a.createElement("a",{onClick:function(){O(N,{imgPoolKey:e.poolKey})}},e.poolName)}},{title:"\u56fe\u7247\u6570\u91cf",dataIndex:"imgCount"},{title:"\u64cd\u4f5c",render:function(t){return i.a.createElement("div",null,e.renderDelteTag(t))}}]}},{key:"render",value:function(){var e=this;return i.a.createElement(H,{markKey:"dataset"},i.a.createElement("div",{className:"home-tool-bar"},R("\u65b0\u589e\u6570\u636e\u96c6",function(){e.setState({visible:!0})})),i.a.createElement(K.a,{style:{width:"100%"},dataSource:this.state.tagList,columns:this.columns()}),i.a.createElement(q.a,{title:"\u65b0\u589e\u6570\u636e\u96c6",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},i.a.createElement(B.a,{value:this.state.newTagName,placeholder:"\u6570\u636e\u96c6\u540d\u79f0",onChange:function(t){e.setState({newTagName:t.target.value})}}),i.a.createElement(B.a,{value:this.state.newTagKey,style:{marginTop:10},placeholder:"\u6570\u636e\u96c6key",onChange:function(t){e.setState({newTagKey:t.target.value})}})))}},{key:"handleOk",value:function(){console.log("create new tag:",this.state.newTagName,this.state.newTagKey);var e,t=this;e=this.state.newTagName,k("/request/pool/add.do",{poolKey:this.state.newTagKey,poolName:e},function(e){y.a.success("\u521b\u5efa\u6210\u529f"),t.queryForAllTag()}),this.handleCancel()}},{key:"handleCancel",value:function(){this.setState({visible:!1})}}]),t}(n.Component),J=(n.Component,a(380),a(420)),V=a(417),Y=a(86),$=a(38),_=a(430),G=a(431),X=a(418),Q=a(11),Z=a(82),ee=a.n(Z),te=(J.a.Meta,function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={watchImageDetailVisiable:!1,watchImageDetailItem:{},imageFolderList:[],tagKey:"",tagDetail:{poolName:"",poolKey:""},folderKey:"none",imageList:[],index:0,size:50,total:0},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=ee()(window.location.href,!0);console.log(">>>>",e.query),this.state.tagKey=e.query.imgPoolKey,this.queryForImageFolder(),this.queryForTagDetail(),this.queryForImageListByFolderKey()}},{key:"isSelectFolder",value:function(){return"none"==this.state.folderKey}},{key:"isItemMarked",value:function(e){return!!e.markImgRecord}},{key:"queryForImageListByFolderKey",value:function(){var e,t,a,n,i=this;this.isSelectFolder()?function(e,t,a,n){k("/tag/queryList.do",{tag:e,index:t,size:a},n)}(this.state.tagKey,this.state.index*this.state.size,this.state.size,function(e){console.log("own",e),i.setState({imageList:i.state.imageList.concat(e.data),total:e.total,index:i.state.index+1})}):(e=this.state.folderKey,t=this.state.index*this.state.size,a=this.state.size,n=this.state.tagKey,k("/imageFolder/query.do",{path:e,index:t,size:a,tag:n},function(e){i.setState({imageList:i.state.imageList.concat(e.data),total:e.total,index:i.state.index+1})}))}},{key:"queryForTagDetail",value:function(){if(this.state.tagKey){var e=this;k("/imageFolder/queryTagDetail.do",{tagId:this.state.tagKey},function(t){console.log("detail",t),e.setState({tagDetail:t.data})})}}},{key:"queryForImageFolder",value:function(){this.state.tagKey||V.a.error("tag\u4e0d\u80fd\u4e3a\u7a7a");var e=this;k("/imageFolder/queryFolder.do",{},function(t){try{t.data.splice(0,0,{folderName:"\u6807\u7b7e\u6240\u6709",info:"none"})}catch(a){console.log(a)}e.setState({imageFolderList:t.data})})}},{key:"renderForSelect",value:function(){return this.state.imageFolderList.map(function(e,t){return i.a.createElement(Y.a.Option,{value:e.info},e.folderName)})}},{key:"render",value:function(){var e=this,t=this,a=this.state.total>this.state.imageList.length?i.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},i.a.createElement($.a,{onClick:this.queryForImageListByFolderKey.bind(this)},"loading more")):null;return i.a.createElement(H,{subTitle:i.a.createElement("a",{onClick:function(){window.location.reload()}},"\u6570\u636e\u96c6\u8be6\u60c5\u9875\u9762["+this.state.tagDetail.poolName+"/"+this.state.tagDetail.poolKey+"]")},i.a.createElement("div",{className:"home-tool-bar"},i.a.createElement(Y.a,{value:this.state.folderKey,style:{minWidth:120},dropdownMatchSelectWidth:!1,onChange:function(e){t.setState({folderKey:e,index:0,imageList:[]},function(){t.queryForImageListByFolderKey()})}},this.renderForSelect()),R(this.state.imageList.length+"/"+this.state.total,function(){})),i.a.createElement("div",null,i.a.createElement(_.a,{grid:{justify:"start",gutter:20,column:5},dataSource:this.state.imageList,loadMore:a,hasMore:!0,renderItem:function(a,n){return i.a.createElement(_.a.Item,null,i.a.createElement(J.a,{extra:e.isItemMarked(a)?i.a.createElement(G.a,{color:"green"},"\u5df2\u6807\u6ce8"):i.a.createElement("div",null),title:n+"/"+a.imageName},i.a.createElement(X.a,{checkedChildren:i.a.createElement(Q.a,{type:"check"}),unCheckedChildren:i.a.createElement(Q.a,{type:"close"}),checked:a.markByTag,onChange:function(e){t.onSwitchClick(e,a)}}),e.isSelectFolder()?R("\u53bb\u6807\u6ce8",function(){O(I,{imgId:a.imageName})}):i.a.createElement("div",null),i.a.createElement("div",{className:"detail-image-display-space",style:{marginTop:5},onClick:function(){t.setState({watchImageDetailVisiable:!0,watchImageDetailItem:a})}},i.a.createElement("img",{height:130,src:w(a.thumbnail)}))))}})),i.a.createElement(q.a,{title:"\u56fe\u7247\u8be6\u60c5"+this.state.watchImageDetailItem.info,visible:this.state.watchImageDetailVisiable,width:1300,onOk:this.handleCancel.bind(this),onCancel:this.handleCancel.bind(this)},i.a.createElement("div",{className:"tag-detail-image-preview"},i.a.createElement("div",null,i.a.createElement("img",{width:this.isItemMarked(this.state.watchImageDetailItem)?600:1e3,src:w(this.state.watchImageDetailItem.info)})),this.isItemMarked(this.state.watchImageDetailItem)?i.a.createElement("div",null,i.a.createElement("img",{width:600,style:{backgroundColor:"#000"},src:w(this.state.watchImageDetailItem.markImgRecord.fileFullPath)})):i.a.createElement("div",null))))}},{key:"onSwitchClick",value:function(e,t){if(null!=t.imageName){var a=this;!0===e?(n=t.imageName,i=t.info,o=this.state.tagKey,k("/tag/insertTagToImage.do",{imageName:n,filePath:i,tag:o},function(e){t.markByTag=!0,a.setState(a.state,function(){V.a.success("\u6dfb\u52a0\u6210\u529f!")})})):function(e,t,a){k("/tag/removeTagToImage.do",{imageName:e,tag:t},a)}(t.imageName,this.state.tagKey,function(e){t.markByTag=!1,a.setState(a.state,function(){V.a.success("\u53bb\u9664\u6210\u529f")})})}var n,i,o}},{key:"handleCancel",value:function(){this.setState({watchImageDetailVisiable:!1})}}]),t}(n.Component)),ae=a(423),ne=a(51),ie=(a(126),a(403),n.Component,G.a.CheckableTag,function(e){function t(){var e;Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={addNewMarkSiwtch:!1,newMarkName:"",newMarkColor:"",recordId:"",recordDetail:{},image:new window.Image,markedImage:new window.Image,maxImageSize:1e3,stageWidth:1e3,stageHeight:1e3,imageWidth:100,imageHeight:100,isTouching:!1,lastPoint:{},pointWidth:30,previewWidth:1e3,previewHeight:1e3,brushs:[],allBrushs:[],selectBrush:0},e.handleDragStart=function(t){e.state.isTouching=!0,e.state.lastPoint=e.pointFromEvent(t)},e.handleDragEnd=function(t){e.state.isTouching=!1,e.drawPointTo(e.pointFromEvent(t))},e.handleDragMove=function(t){e.state.isTouching&&e.drawPointTo(e.pointFromEvent(t))};var a=ee()(window.location.href,!0);return console.log(">>>>",a),e.state.recordId=a.query.imgId,e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.queryForRecordRetail()}}]),Object(l.a)(t,[{key:"queryForTags",value:function(){var e=this;E(function(t){e.setState({allBrushs:t.data},function(){e.reloadBrush(function(){e.queryImage()})})})}},{key:"queryForRecordRetail",value:function(){var e=this;k("/tag/queryDetail.do",{imageName:this.state.recordId},function(t){console.log("detail:",t),e.setState({recordDetail:t.data},function(){e.queryForTags()})})}},{key:"reloadBrush",value:function(e){if(console.log("reload brush"),this.state.allBrushs.length>0&&this.state.recordDetail.markImgRecord){var t={},a=!0,n=!1,i=void 0;try{for(var o,s=this.state.allBrushs[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var r=o.value;t[r.tagKey]=r}}catch(f){n=!0,i=f}finally{try{a||null==s.return||s.return()}finally{if(n)throw i}}var l=[],c=!0,h=!1,u=void 0;try{for(var g,d=this.state.recordDetail.markImgRecord.tag[Symbol.iterator]();!(c=(g=d.next()).done);c=!0){var m=g.value;t[m]&&l.push(t[m])}}catch(f){h=!0,u=f}finally{try{c||null==d.return||d.return()}finally{if(h)throw u}}console.log("....",l,t),this.setState({brushs:l},function(){e()})}else e()}},{key:"pointFromEvent",value:function(e){var t={};return t.x=e.evt.layerX,t.y=e.evt.layerY,t}},{key:"drawPointTo",value:function(e){var t=this.shapeContext;-1===this.state.selectBrush?(t.strokeStyle="#fff",this.shapeContext.globalCompositeOperation="destination-out"):(t.strokeStyle=this.state.brushs[this.state.selectBrush].tagColor,this.shapeContext.globalCompositeOperation="source-over"),t.lineWidth=this.state.pointWidth,t.beginPath(),t.moveTo(this.state.lastPoint.x,this.state.lastPoint.y),t.lineTo(e.x,e.y),t.closePath(),t.stroke();var a=this.state.lastPoint.x>e.x?e.x:this.state.lastPoint.x,n=this.state.lastPoint.y>e.y?e.y:this.state.lastPoint.y,i=Math.abs(this.state.lastPoint.x-e.x),o=Math.abs(this.state.lastPoint.y-e.y);if(a-=this.state.pointWidth/2,n-=this.state.pointWidth/2,i+=1.5*this.state.pointWidth,o+=1.5*this.state.pointWidth,this.state.lastPoint=e,this.state.selectBrush>=0){var s=this.shapeContext.getImageData(a,n,i,o),r=function(e){var t=e.toLowerCase();if(e={r:0,g:0,b:0},t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var a="#",n=1;n<4;n+=1)a+=t.slice(n,n+1).concat(t.slice(n,n+1));t=a}var i=[];for(n=1;n<7;n+=2)i.push(parseInt("0x"+t.slice(n,n+2)));3==i.length&&(e.r=i[0],e.g=i[1],e.b=i[2])}return e}(this.state.brushs[this.state.selectBrush].tagColor);if(console.log("thecolor",r),s){for(var l=0,c=s.data.length;l<c;l+=4){s.data[l+3]>160&&(s.data[l]=r.r,s.data[l+1]=r.g,s.data[l+2]=r.b,s.data[l+3]=160)}this.shapeContext.putImageData(s,a,n)}}this.updateContext()}},{key:"updateContext",value:function(){this.imageNode.getContext().drawImage(this.state.image,0,0,this.state.stageWidth,this.state.stageHeight),this.imageNode.getContext().drawImage(this.offCanvas,0,0),this.previewNode.getContext().clearRect(0,0,this.state.previewWidth,this.state.previewHeight),this.previewNode.getContext().drawImage(this.offCanvas,0,0,this.state.stageWidth,this.state.stageHeight,0,0,this.state.previewWidth,this.state.previewHeight)}},{key:"queryImage",value:function(){var e=this;this.state.recordDetail.imgFilePath&&(this.state.image.src=w(this.state.recordDetail.imgFilePath),this.state.image.onload=function(t){if(console.log(">>>>>><><><><<",e.imageNode),e.imageNode){if(console.log(t,e.imageNode.getSize()),e.imageNode.getSize().width>e.state.maxImageSize||e.imageNode.getSize().height>e.state.maxImageSize){var a=e.state.maxImageSize/e.imageNode.getSize().width,n=e.state.maxImageSize/e.imageNode.getSize().height,i=a<n?a:n;e.state.stageWidth=i*e.imageNode.getSize().width,e.state.stageHeight=i*e.imageNode.getSize().height}else e.state.stageWidth=e.imageNode.getSize().width,e.state.stageHeight=e.imageNode.getSize().height;var o=e.imageNode.getSize().width*e.imageNode.getSize().width/e.state.stageWidth,s=e.imageNode.getSize().height*e.imageNode.getSize().height/e.state.stageHeight;e.state.previewWidth=e.state.stageWidth/3,e.state.previewHeight=e.state.stageHeight/3,e.setState({imageWidth:o,imageHeight:s})}e.stageNode.on("mousedown touchstart",e.handleDragStart),e.stageNode.on("mouseup touchend",e.handleDragEnd),e.stageNode.on("mousemove touchmove",e.handleDragMove);var r=document.createElement("canvas");r.width=e.state.stageWidth,r.height=e.state.stageHeight,e.offCanvas=r,e.shapeContext=r.getContext("2d"),e.shapeContext.lineJoin="round",e.state.recordDetail.markImgRecord&&(e.state.markedImage.src=w(e.state.recordDetail.markImgRecord.fileFullPath),e.state.markedImage.crossOrigin="Anonymous",e.state.markedImage.onload=function(t){console.log("load mark img",t,e.state.markedImage),e.shapeContext.drawImage(e.state.markedImage,0,0,e.offCanvas.width,e.offCanvas.height),e.setState(e.state,function(){e.updateContext()})})})}},{key:"imageInfo",value:function(){if(this.imageNode)return"image size ".concat(this.imageNode.getSize().width," * ").concat(this.imageNode.getSize().height)}},{key:"render",value:function(){var e=this;return i.a.createElement(H,{subTitle:"\u56fe\u7247\u6807\u6ce8\u9875\u9762"},i.a.createElement("div",{className:"sketch-play-ground"},i.a.createElement("div",{className:"sketch-space"},i.a.createElement("div",null,this.imageInfo()),i.a.createElement("div",{className:"draw-space"},i.a.createElement(ne.Stage,{width:this.state.stageWidth,height:this.state.stageHeight,ref:function(t){e.stageNode=t}},i.a.createElement(ne.Layer,null,i.a.createElement(ne.Image,{image:this.state.image,cropWidth:this.state.imageWidth,cropHeight:this.state.imageHeight,ref:function(t){e.imageNode=t}}))))),i.a.createElement("div",{className:"sketch-preview-space"},i.a.createElement("div",null,"preview"),i.a.createElement("div",{style:{width:this.state.previewWidth,height:this.state.previewHeight}},i.a.createElement(ne.Stage,{style:{backgroundColor:"#000"},width:this.state.previewWidth,height:this.state.previewHeight},i.a.createElement(ne.Layer,null,i.a.createElement(ne.Shape,{ref:function(t){e.previewNode=t}})))),i.a.createElement("div",{style:{marginTop:20,marginBottom:20}},"brush size "),i.a.createElement(ae.a,{step:5,defaultValue:[10,50],value:this.state.pointWidth,onChange:function(t){e.setState({pointWidth:t})}}),i.a.createElement("div",{style:{marginTop:20,marginBottom:20}},"\u6807\u6ce8\u5217\u8868",R("+\u65b0\u589e\u6807\u6ce8",function(){e.setState({addNewMarkSiwtch:!0,newMarkName:"newMark",newMarkColor:""})})),i.a.createElement("div",{className:"sketch-tool-bar"},i.a.createElement($.a,{type:-1===this.state.selectBrush?"primary":"default",style:{marginLeft:10},onClick:function(t){e.setState({selectBrush:-1})}},i.a.createElement("div",null,"\u64e6\u9664")),this.renderForBrushs()),i.a.createElement("div",{style:{marginTop:20,marginBottom:20}},"save "),i.a.createElement($.a,{onClick:function(){e.onUploadFileCallBack()}},"save"))),i.a.createElement(q.a,{title:"\u65b0\u589e\u6807\u6ce8",visible:this.state.addNewMarkSiwtch,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},this.state.allBrushs.map(function(t,a){var n=!0,o=!1,s=void 0;try{for(var r,l=e.state.brushs[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){if(r.value.tagKey==t.tagKey)return}}catch(c){o=!0,s=c}finally{try{n||null==l.return||l.return()}finally{if(o)throw s}}return i.a.createElement($.a,{key:a+"bucction",style:{marginTop:10,marginLeft:10},onClick:function(){e.state.brushs.push(t),e.setState(e.state)}},t.tagName)})))}},{key:"dataURLtoBlob",value:function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:a})}},{key:"onUploadFileCallBack",value:function(){y.a.loading("\u4fdd\u5b58\u4e2d...");var e=this.offCanvas.toDataURL("image/jpg");C(this.dataURLtoBlob(e),this.state.recordId,this.state.brushs,function(e){y.a.destroy(),y.a.success("\u4fdd\u5b58\u6210\u529f"),console.log(e)})}},{key:"handleOk",value:function(){this.handleCancel()}},{key:"handleCancel",value:function(){this.setState({addNewMarkSiwtch:!1})}},{key:"brushColums",value:function(){var e=this;return[{title:"\u6807\u6ce8\u540d\u79f0",dataIndex:"label",key:"label"},{title:"\u989c\u8272\u503c",dataIndex:"color",key:"color",render:function(e){return i.a.createElement("div",{style:{width:20,height:20,backgroundColor:e}})}},{title:"\u9009\u62e9",key:"operation",render:function(t,a,n){return i.a.createElement("div",null,i.a.createElement(X.a,{checked:n===e.state.selectBrush,onChange:function(t){e.setState({selectBrush:n})}}))}}]}},{key:"resetContextAlphaByRect",value:function(e,t,a,n,i,o){var s=this.shapeContext.getImageData(t,a,n,i);if(s){for(var r=0,l=s.data.length;r<l;r+=4){s.data[r+3]>o&&(s.data[r+3]=o)}this.shapeContext.putImageData(s,t,a)}}},{key:"renderForBrushs",value:function(){var e=this;return this.state.brushs.map(function(t,a){return i.a.createElement($.a,{type:e.state.selectBrush===a?"primary":"default",style:{marginLeft:10},onClick:function(t){e.setState({selectBrush:a})}},t.tagName,i.a.createElement("div",{style:{backgroundColor:t.tagColor,marginBottom:5,width:30,height:10}}))})}}]),t}(n.Component)),oe=(n.Component,function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(H,{markKey:"train"},"Train page")}}]),t}(n.Component)),se=a(419),re=a(421),le=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={visible:!1,tagList:[],newTag:{tagKey:"",tagName:"",tagColor:"",ext:""}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.queryForAllTag()}},{key:"queryForAllTag",value:function(){var e=this;E(function(t){console.log("query all"),e.setState({tagList:t.data}),console.log(t)})}},{key:"reset",value:function(){this.state.newTag={tagKey:"",tagName:"",tagColor:"",ext:""}}},{key:"colums",value:function(){var e=this,t=this;return[{title:"\u6807\u7b7e\u540d\u79f0",dataIndex:"tagName",key:"tagName"},{title:"\u6807\u7b7ekey",dataIndex:"tagKey",key:"tagKey"},{title:"\u989c\u8272",key:"tagColor",render:function(e){return i.a.createElement("div",{style:{color:"#000",backgroundColor:e.tagColor}},e.tagColor)}},{title:"\u64cd\u4f5c",key:"operation",render:function(a){return i.a.createElement("div",null,i.a.createElement(se.a,{title:"\u786e\u8ba4\u5220\u9664[ "+a.tagName+" ]?",onConfirm:function(){k("/request/markTag/delete.do",{tagName:a.tagKey},function(){console.log("dsadsadasdas>>>>>>"),V.a.success("\u5220\u9664\u6210\u529f"),t.queryForAllTag()})},onCancel:function(){},okText:"Yes",cancelText:"No"},R("\u5220\u9664",function(){})),R("\u7f16\u8f91",function(){e.setState({visible:!0,newTag:JSON.parse(JSON.stringify(a))})}))}}]}},{key:"render",value:function(){var e=this;return i.a.createElement(H,{markKey:"datatag",subTitle:"\u6807\u7b7e\u7ba1\u7406\u9875"},i.a.createElement("div",{style:{marginBottom:20}},R("\u65b0\u589e\u6807\u7b7e",function(){e.reset(),e.setState({visible:!0})})),i.a.createElement(re.a,{dataSource:this.state.tagList,columns:this.colums()}),i.a.createElement(q.a,{title:"\u65b0\u589e\u6807\u7b7e",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},i.a.createElement(B.a,{value:this.state.newTag.tagName,placeholder:"\u6807\u7b7e\u540d\u79f0",onChange:function(t){e.state.newTag.tagName=t.target.value,e.setState(e.state)}}),i.a.createElement(B.a,{value:this.state.newTag.tagKey,style:{marginTop:10},placeholder:"\u6807\u7b7e\u552f\u4e00key",onChange:function(t){e.state.newTag.tagKey=t.target.value,e.setState(e.state)}}),i.a.createElement(B.a,{value:this.state.newTag.tagColor,style:{marginTop:10},placeholder:"\u6807\u7b7e\u989c\u8272 \u4f8b\u5982:#00dd00",onChange:function(t){e.state.newTag.tagColor=t.target.value,e.setState(e.state)}}),i.a.createElement("div",{style:{width:200,height:20,marginTop:10,backgroundColor:this.state.newTag.tagColor}})))}},{key:"handleOk",value:function(){var e,t,a,n,i,o=this;e=this.state.newTag.tagName,t=this.state.newTag.tagKey,a=this.state.newTag.tagColor,n="{}",i=function(e){console.log(e),V.a.success("\u65b0\u5efa\u6210\u529f"),o.queryForAllTag()},console.log(e,t,encodeURIComponent(a),n),k("/request/markTag/update.do",{tagName:e,tagKey:t,tagColor:encodeURIComponent(a),ext:encodeURIComponent(n)},i),this.handleCancel()}},{key:"handleCancel",value:function(){this.setState({visible:!1})}}]),t}(n.Component),ce=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(g.a,null,i.a.createElement(d.a,null,i.a.createElement(m.a,{path:T,component:le}),i.a.createElement(m.a,{path:x,component:oe}),i.a.createElement(m.a,{path:N,component:te}),i.a.createElement(m.a,{path:I,component:ie}),i.a.createElement(m.a,{path:S,component:U})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[193,2,1]]]);
//# sourceMappingURL=main.bfe6de25.chunk.js.map